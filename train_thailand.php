<?php

if (preg_match("~^\btrain from (.+) to (.+)\b~", $req, $match)) {
    echo "<h2>INSIDE TRAIN THAILAND</h2>";
    var_dump($match);

    $source = trim($match[1]);
    $dest = trim($match[2]);
	
	echo $source = getMatchedThaiTrainStation($source);
	echo $dest = getMatchedThaiTrainStation($dest);
	
	if($source != "" && $dest != "") {
    	$trainDetails = gettraindetails(urlencode($source), urlencode($dest));
	}
    
    if (!empty($trainDetails)) {
        $total_return = $trainDetails;
        $source_machine = $machine_id;
        $current_file = "/temp/$numbers";
        file_put_contents(DATA_PATH . $current_file, $total_return);
        $to_logserver['source'] = 'train_thai';
        include 'allmanip.php';
        putOutput($total_return);
        exit();
    } else {
		$total_return = "No trains found!\nTo get train details, send train from &lt;source&gt; to &lt;destination&gt;";
        $to_logserver['source'] = 'train_thai';
		$to_logserver['isresult'] = 0;
        include 'allmanip.php';
        putOutput($total_return);
        exit();
	}
} else if (preg_match("~^\btrain\b(.+)?~", $req, $match)) {
	$total_return = "To get train details, send train from &lt;source&gt; to &lt;destination&gt;";
	$to_logserver['source'] = 'train_thai';
	$to_logserver['isresult'] = 0;
	include 'allmanip.php';
	putOutput($total_return);
	exit();
}

function gettraindetails($source, $dest) {
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, 'API');
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, "StationFirst=$source&StationLast=$dest&Submit=++Check+");
    $contents = curl_exec($ch);
    curl_close($ch);

    $data = "";
    if (preg_match('~<table  width="90%" border = 1 bordercolor="#FF9966" bgcolor="#FFFFCC" >(.+)</table>~Usi', $contents, $match)) {
//    var_dump($match);

        $data = $match[1];
        $data = preg_replace("~[\s]+~", " ", $data);
        $data = preg_replace('~<td height="20" bgcolor="#EEEEEE"><div align="center" class="style58">(.+)</div></td>~Usi', "", $data);
        $data = preg_replace('~<a href="http://www.railway.co.th/Ticket/TrainStopStation_Time_All.asp.+">(.+)</a>~Usi', "", $data);
        $data = preg_replace('~<a href="http://www.railway.co.th/Ticket/ChackPrice_TrainGo.asp.+>(.+)</a>~Usi', "", $data);
        $data = str_replace("</div></td>", "***", $data);
        $data = str_replace("</font></div></td>", "***", $data);
        $data = str_replace("</font></div></td>", "***", $data);
        $data = str_replace('<tr bgcolor="#ECF9FF" class="style7">', "+++", $data);
        $data = str_replace("&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;", "", $data);
        $data = strip_tags($data);
        $data = preg_replace("~[\s]+~", " ", $data);
        $data = str_replace("***", " ", $data);
        $data = str_replace("+++", "\n", $data);
        $data = str_replace("   Train Number ", "Train No", $data);
        $data = str_replace("  Timetable   Fares   ", "", $data);
		$data = str_replace(".", ":", $data);
		$data = "Trains from $source to $dest:\n" . $data;
    }
    return $data;
}

function getMatchedThaiTrainStation($str) {
	$arr = array("Bangkok" => "Bangkok",
				"Krabiat" => "Krabiat",
				"Krasang" => "Krasang",
				"Klang Dong" => "Klang Dong",
				"Kadae" => "Kadae",
				"Kadon Kho" => "Kadon Kho",
				"Kapang" => "Kapang",
				"Kantang" => "Kantang",
				"Kanthararom" => "Kanthararom",
				"Kanchanaburi" => "Kanchanaburi",
				"Khan Keha" => "Khan Keha",
				"Kamphaeng Saen" => "Kamphaeng Saen",
				"Kut Kwang" => "Kut Kwang",
				"Kut Chik" => "Kut Chik",
				"Kumphawapi" => "Kumphawapi",
				"Kui Buri" => "Kui Buri",
				"Ko Maha Mongkol" => "Ko Maha Mongkol",
				"Ko Saba" => "Ko Saba",
				"Kaeng Sue Ten" => "Kaeng Sue Ten",
				"Kaeng Luang" => "Kaeng Luang",
				"Kabin Buri" => "Kabin Buri",
				"Kabin Kao" => "Kabin Kao",
				"Khon Kaen" => "Khon Kaen",
				"Khun Tan" => "Khun Tan",
				"Ked Muang" => "Ked Muang",
				"Khao Khok" => "Khao Khok",
				"Khao Chaison" => "Khao Chaison",
				"Khao Chaiyarat" => "Khao Chaiyarat",
				"Khao Tao" => "Khao Tao",
				"Khao Thamon" => "Khao Thamon",
				"Khao Thong" => "Khao Thong",
				"Khao Pip" => "Khao Pip",
				"Khao Pun" => "Khao Pun",
				"Khao Phanom Baek" => "Khao Phanom Baek",
				"Khao Phrabat" => "Khao Phrabat",
				"Khao Phlung" => "Khao Phlung",
				"Khao Phlu" => "Khao Phlu",
				"Khao Yoi" => "Khao Yoi",
				"Khao Yai Ka Ta" => "Khao Yai Ka Ta",
				"Khao Suan Kwang" => "Khao Suan Kwang",
				"Khao Suan Thurian" => "Khao Suan Thurian",
				"Khao Sung" => "Khao Sung",
				"Khao Lung" => "Khao Lung",
				"Khao Hua Khwai" => "Khao Hua Khwai",
				"Khao Hin Dat" => "Khao Hin Dat",
				"Pa Sak Jolasid Dam" => "Pa Sak Jolasid Dam",
				"Khlong Kui" => "Khlong Kui",
				"Khlong Khanan" => "Khlong Khanan",
				"Khlong Khanan Chit" => "Khlong Khanan Chit",
				"Khlong Khut" => "Khlong Khut",
				"Klong Kwaeng Klan" => "Klong Kwaeng Klan",
				"Khlong Ngae" => "Khlong Ngae",
				"Khlong Chang" => "Khlong Chang",
				"Khlong Chan Di" => "Khlong Chan Di",
				"Khlong Chak" => "Khlong Chak",
				"Khlong Ton Sai" => "Khlong Ton Sai",
				"Khlong Tan" => "Khlong Tan",
				"Khlong Ta Khot" => "Khlong Ta Khot",
				"Khlong Sai" => "Khlong Sai",
				"Khlong Sai" => "Khlong Sai",
				"Khlong Nok Lek" => "Khlong Nok Lek",
				"Khlong Bang Tan" => "Khlong Bang Tan",
				"Khlong Bang Phra" => "Khlong Bang Phra",
				"Khlong Prap" => "Khlong Prap",
				"Khlong Pla Kot" => "Khlong Pla Kot",
				"Khlong Phai" => "Khlong Phai",
				"Khlong Phutsa" => "Khlong Phutsa",
				"Khlong Muan" => "Khlong Muan",
				"Khlong Maha Sawat" => "Khlong Maha Sawat",
				"Khlong Maphlap" => "Khlong Maphlap",
				"Khlong Yan" => "Khlong Yan",
				"Khlong Ya" => "Khlong Ya",
				"Khlong Yang" => "Khlong Yang",
				"Khlong Yi Sip Et" => "Khlong Yi Sip Et",
				"Khlong Rangsit" => "Khlong Rangsit",
				"Khlong Lamung" => "Khlong Lamung",
				"Khlong Wang Chang" => "Khlong Wang Chang",
				"Khlong Sun" => "Khlong Sun",
				"Khlong Nhung" => "Khlong Nhung",
				"Khlong Luang Phaeng" => "Khlong Luang Phaeng",
				"Klong Udom Chonlajorn" => "Klong Udom Chonlajorn",
				"Khuan Khiam" => "Khuan Khiam",
				"Khuan Niang" => "Khuan Niang",
				"Khuan Phra" => "Khuan Phra",
				"Khuan Mao" => "Khuan Mao",
				"Khuan Nong Khwa" => "Khuan Nong Khwa",
				"Khuan Hin Mui" => "Khuan Hin Mui",
				"Khok Khwai" => "Khok Khwai",
				"Khok Chang" => "Khok Chang",
				"Khan Kradai" => "Khan Kradai",
				"Khan Thuli" => "Khan Thuli",
				"Kham Kling" => "Kham Kling",
				"Khiri Ratthanikhom" => "Khiri Ratthanikhom",
				"Khwae Noi" => "Khwae Noi",
				"Khok Kruat" => "Khok Kruat",
				"Khok Kathiam" => "Khok Kathiam",
				"Khok Khram" => "Khok Khram",
				"Khok Khli" => "Khok Khli",
				"Khok Ta Hom" => "Khok Ta Hom",
				"Khok Sai" => "Khok Sai",
				"Khok Makok" => "Khok Makok",
				"Khok Sahya" => "Khok Sahya",
				"Khok Salung" => "Khok Salung",
				"Khok Sa-at" => "Khok Sa-at",
				"Jaran Sanitwong" => "Jaran Sanitwong",
				"Chom Thong" => "Chom Thong",
				"Chana" => "Chana",
				"Chakkarat" => "Chakkarat",
				"Chatturat" => "Chatturat",
				"Chanthuk" => "Chanthuk",
				"Chansen" => "Chansen",
				"Chet Samian" => "Chet Samian",
				"Cho Ai Rong" => "Cho Ai Rong",
				"Chawang" => "Chawang",
				"Chon Buri" => "Chon Buri",
				"Chong Khao" => "Chong Khao",
				"Chong Khae" => "Chong Khae",
				"Chong Khaep" => "Chong Khaep",
				"Chong Samran" => "Chong Samran",
				"Cha Muang" => "Cha Muang",
				"Cha-uat" => "Cha-uat",
				"Chai Buri" => "Chai Buri",
				"Kaeng Khoi Junction" => "Kaeng Khoi Junction",
				"Kao Chi Chan Junction" => "Kao Chi Chan Junction",
				"Khao Chum Thong Junction" => "Khao Chum Thong Junction",
				"Khlong Sip Kao Junction" => "Khlong Sip Kao Junction",
				"Chachoengsao Junction" => "Chachoengsao Junction",
				"Taling Chan Junction" => "Taling Chan Junction",
				"Thanon Chira Junction" => "Thanon Chira Junction",
				"Thung Song Junction" => "Thung Song Junction",
				"Bua Yai Junction" => "Bua Yai Junction",
				"Bang Sue Junction" => "Bang Sue Junction",
				"Bang Sue Junction" => "Bang Sue Junction",
				"Ban Dara Junction" => "Ban Dara Junction",
				"Ban Thung Pho Junction" => "Ban Thung Pho Junction",
				"Ban Phachi Junction" => "Ban Phachi Junction",
				"Si Racha Junction" => "Si Racha Junction",
				"Nong Pla Duk Junction" => "Nong Pla Duk Junction",
				"Hat Yai Junction" => "Hat Yai Junction",
				"Chumphon" => "Chumphon",
				"Chumsaeng" => "Chumsaeng",
				"Chiang Rak" => "Chiang Rak",
				"Chiang Rak Noi" => "Chiang Rak Noi",
				"Chiang Mai" => "Chiang Mai",
				"Chaiya" => "Chaiya",
				"Soi Wat Lan Boon" => "Soi Wat Lan Boon",
				"Sap Muang" => "Sap Muang",
				"Yanasangwararam" => "Yanasangwararam",
				"Dong Takhop" => "Dong Takhop",
				"Dong Maku" => "Dong Maku",
				"Don Khun Wiset" => "Don Khun Wiset",
				"Don Sai" => "Don Sai",
				"Don Thong" => "Don Thong",
				"Don Thup" => "Don Thup",
				"Don Muang" => "Don Muang",
				"Don Sa-nguan" => "Don Sa-nguan",
				"Don Si Non" => "Don Si Non",
				"Don Yha Nang" => "Don Yha Nang",
				"Den Chai" => "Den Chai",
				"Ton Samrong" => "Ton Samrong",
				"Tron" => "Tron",
				"Trang" => "Trang",
				"Talat Phlu" => "Talat Phlu",
				"Talat Lam Narai" => "Talat Lam Narai",
				"Talat Nong Khai" => "Talat Nong Khai",
				"Talatmai Don Muang" => "Talatmai Don Muang",
				"Taphan Hin" => "Taphan Hin",
				"Tanyong Mat" => "Tanyong Mat",
				"Tase" => "Tase",
				"Ta Paet" => "Ta Paet",
				"To Deng" => "To Deng",
				"Tanon Songpol" => "Tanon Songpol",
				"Thamen Chai" => "Thamen Chai",
				"Thale Wa" => "Thale Wa",
				"Thap Krit" => "Thap Krit",
				"Thap Kwang" => "Thap Kwang",
				"Thap Sakae" => "Thap Sakae",
				"Tha Kilen" => "Tha Kilen",
				"Tha Kasem" => "Tha Kasem",
				"Tha Khae" => "Tha Khae",
				"Tha Chalom" => "Tha Chalom",
				"Tha Chang" => "Tha Chang",
				"Tha Chalaep" => "Tha Chalaep",
				"Tha Chana" => "Tha Chana",
				"Tha Chomphu" => "Tha Chomphu",
				"Tha Chang" => "Tha Chang",
				"Tha Ta Sua" => "Tha Ta Sua",
				"Tha Thong" => "Tha Thong",
				"Thanpho" => "Thanpho",
				"Tha Phra" => "Tha Phra",
				"Tha Maenglak " => "Tha Maenglak ",
				"Tha Rua" => "Tha Rua",
				"Tha Rua Noi" => "Tha Rua Noi",
				"Tha Rua Mai" => "Tha Rua Mai",
				"Tha Sak" => "Tha Sak",
				"Tha Sao" => "Tha Sao",
				"Tha Lo" => "Tha Lo",
				"Thi Wang" => "Thi Wang",
				"Thung Kha" => "Thung Kha",
				"Thung Thong" => "Thung Thong",
				"Thung Bua" => "Thung Bua",
				"Thung Pradu" => "Thung Pradu",
				"Thung Mamao" => "Thung Mamao",
				"Thung Song Hong" => "Thung Song Hong",
				"Thung Si Thong" => "Thung Si Thong",
				"Thepha" => "Thepha",
				"Thai" => "Thai",
				"Thon Buri" => "Thon Buri",
				"Nakhon Chaisi" => "Nakhon Chaisi",
				"Nakhon Chum" => "Nakhon Chum",
				"Nakhon Pathom" => "Nakhon Pathom",
				"Nakhon Ratchasima" => "Nakhon Ratchasima",
				"Nakhon Lampang" => "Nakhon Lampang",
				"Nakhon Si Thammarat" => "Nakhon Si Thammarat",
				"Nakhon Sawan" => "Nakhon Sawan",
				"Nava Nakhon" => "Nava Nakhon",
				"Na Kan" => "Na Kan",
				"Na Cha-ang" => "Na Cha-ang",
				"Na Tha" => "Na Tha",
				"Na Bon" => "Na Bon",
				"Na Pradu" => "Na Pradu",
				"Na Pru" => "Na Pru",
				"Na Po" => "Na Po",
				"Na Phak Khuang" => "Na Phak Khuang",
				"Na Phu" => "Na Phu",
				"Na Muang" => "Na Muang",
				"Na San" => "Na San",
				"Nam Tok" => "Nam Tok",
				"Nam Phong" => "Nam Phong",
				"Noen Thua Paep" => "Noen Thua Paep",
				"Noen Makok" => "Noen Makok",
				"Noen Sawat" => "Noen Sawat",
				"Non Khro" => "Non Khro",
				"Non Thong Lang" => "Non Thong Lang",
				"Non Phayom" => "Non Phayom",
				"Non Sa-at" => "Non Sa-at",
				"Non Sung" => "Non Sung",
				"Bo Krang" => "Bo Krang",
				"Bo Takhro" => "Bo Takhro",
				"Bo Nok" => "Bo Nok",
				"Bandai Ma" => "Bandai Ma",
				"Bang Krachao" => "Bang Krachao",
				"Bang Krathum" => "Bang Krathum",
				"Bang Krabun" => "Bang Krabun",
				"Bang Klam" => "Bang Klam",
				"Bang Kaeo" => "Bang Kaeo",
				"Bang Kwan" => "Bang Kwan",
				"Bang Khen" => "Bang Khen",
				"Bang Khem" => "Bang Khem",
				"Bang Chak" => "Bang Chak",
				"Bang Toey" => "Bang Toey",
				"Bang Thorat" => "Bang Thorat",
				"Bang Nam Jued" => "Bang Nam Jued",
				"Bang Nam Prieo" => "Bang Nam Prieo",
				"Bang Bon" => "Bang Bon",
				"Bang Bamru" => "Bang Bamru",
				"Bang Pa-in" => "Bang Pa-in",
				"Bang Phra" => "Bang Phra",
				"Bang Mun Nak" => "Bang Mun Nak",
				"Bang Ramat" => "Bang Ramat",
				"Bang Lamung" => "Bang Lamung",
				"Bang Saphan Noi" => "Bang Saphan Noi",
				"Bang Saphan Yai" => "Bang Saphan Yai",
				"Bang Si Khot" => "Bang Si Khot",
				"Ban Khok Kwaow" => "Ban Khok Kwaow",
				"Ban Kradon" => "Ban Kradon",
				"Ban Kraphi" => "Ban Kraphi",
				"Ban Krut" => "Ban Krut",
				"Ban Kluai" => "Ban Kluai",
				"Ban Kloy" => "Ban Kloy",
				"Ban Klap" => "Ban Klap",
				"Ban Kalan" => "Ban Kalan",
				"Ban Ka Long" => "Ban Ka Long",
				"Ban Koei Chen" => "Ban Koei Chen",
				"Ban Kao" => "Ban Kao",
				"Ban Kao Ngiu" => "Ban Kao Ngiu",
				"Ban Ko" => "Ban Ko",
				"Ban Ko Daeng" => "Ban Ko Daeng",
				"Ban Ko Pring" => "Ban Ko Pring",
				"Ban Ko Muk" => "Ban Ko Muk",
				"Ban Ko Rang" => "Ban Ko Rang",
				"Ban Ko Yai" => "Ban Ko Yai",
				"Ban Kaeng" => "Ban Kaeng",
				"Ban Khanai" => "Ban Khanai",
				"Ban Khon Hat" => "Ban Khon Hat",
				"Ban Khom" => "Ban Khom",
				"Ban Khron" => "Ban Khron",
				"Ban Khlo" => "Ban Khlo",
				"Ban Khok Ma" => "Ban Khok Ma",
				"Ban Khai Thai" => "Ban Khai Thai",
				"Ban Khu Bua" => "Ban Khu Bua",
				"Ban Khok Krabuang" => "Ban Khok Krabuang",
				"Ban Khon" => "Ban Khon",
				"Ban Chongko" => "Ban Chongko",
				"Ban Chang" => "Ban Chang",
				"Banchimphli" => "Banchimphli",
				"Ban Chong Tai" => "Ban Chong Tai",
				"Ban Cha-am" => "Ban Cha-am",
				"Ban Chi Phakhao" => "Ban Chi Phakhao",
				"Ban Dong Bang" => "Ban Dong Bang",
				"Ban Dong Phlong" => "Ban Dong Phlong",
				"Ban Duat" => "Ban Duat",
				"Ban Don Klang" => "Ban Don Klang",
				"Ban Don Rak" => "Ban Don Rak",
				"Ban Don Riap" => "Ban Don Riap",
				"Ban Don Yai" => "Ban Don Yai",
				"Ban Dan" => "Ban Dan",
				"Ban Din Lan" => "Ban Din Lan",
				"Ban Ton Don" => "Ban Ton Don",
				"Ban Trok Kae" => "Ban Trok Kae",
				"Ban Tako" => "Ban Tako",
				"Ban Takhli" => "Ban Takhli",
				"Ban Ta Noen" => "Ban Ta Noen",
				"Ban Tum" => "Ban Tum",
				"Ban Tun" => "Ban Tun",
				"Ban Teng Nam" => "Ban Teng Nam",
				"Ban Tae" => "Ban Tae",
				"Ban Thon" => "Ban Thon",
				"Ban Sap Somboon" => "Ban Sap Somboon",
				"Ban Sai Thong" => "Ban Sai Thong",
				"Ban Thap Chang" => "Ban Thap Chang",
				"Ban Tha Chang" => "Ban Tha Chang",
				"Ban Tungkhai" => "Ban Tungkhai",
				"Ban Thung Luang" => "Ban Thung Luang",
				"Ban Thung Lo" => "Ban Thung Lo",
				"Ban Na" => "Ban Na",
				"Ban Na Khwang" => "Ban Na Khwang",
				"Ban Na Khok" => "Ban Na Khok",
				"Ban Nang Long" => "Ban Nang Long",
				"Ban Nikhom" => "Ban Nikhom",
				"Ban Niam" => "Ban Niam",
				"Ban Non Phung" => "Ban Non Phung",
				"Ban Bo" => "Ban Bo",
				"Ban Bung" => "Ban Bung",
				"Ban Plug Rad" => "Ban Plug Rad",
				"Ban Pokpaek" => "Ban Pokpaek",
				"Ban Pak Chap" => "Ban Pak Chap",
				"Ban Pak Phli" => "Ban Pak Phli",
				"Ban Pa Ko" => "Ban Pa Ko",
				"Ban Pa Kai" => "Ban Pa Kai",
				"Ban Patae" => "Ban Patae",
				"Ban Pa Wai" => "Ban Pa Wai",
				"Ban Pin" => "Ban Pin",
				"Ban Pong" => "Ban Pong",
				"Ban Pong Kom" => "Ban Pong Kom",
				"Ban Pong Sieo" => "Ban Pong Sieo",
				"Ban Phai" => "Ban Phai",
				"Ban Phrom Saeng" => "Ban Phrom Saeng",
				"Ban Phra Phut" => "Ban Phra Phut",
				"Ban Phru Krachaeng" => "Ban Phru Krachaeng",
				"Ban Plu Ta Luang" => "Ban Plu Ta Luang",
				"Ban Phanao" => "Ban Phanao",
				"Ban Pu Pong" => "Ban Pu Pong",
				"Ban Poon" => "Ban Poon",
				"Ban Pho" => "Ban Pho",
				"Ban Makok Tai" => "Ban Makok Tai",
				"Ban Makham Lom" => "Ban Makham Lom",
				"Ban Makha" => "Ban Makha",
				"Ban Ma" => "Ban Ma",
				"Ban Yang" => "Ban Yang",
				"Ban Yupo" => "Ban Yupo",
				"Ban Rai" => "Ban Rai",
				"Ban Wa Tabaek" => "Ban Wa Tabaek",
				"Ban Wang Chai" => "Ban Wang Chai",
				"Ban Sa Khrok" => "Ban Sa Khrok",
				"Ban Sang" => "Ban Sang",
				"Ban Song" => "Ban Song",
				"Ban Salo Bukit Yuaerae" => "Ban Salo Bukit Yuaerae",
				"Ban Suntara" => "Ban Suntara",
				"Ban Salaeng Phan" => "Ban Salaeng Phan",
				"Ban Sok Rang" => "Ban Sok Rang",
				"Ban Nong Gunngar" => "Ban Nong Gunngar",
				"Ban Nong Kham" => "Ban Nong Kham",
				"Ban Nong Tat" => "Ban Nong Tat",
				"Ban Nong Bua" => "Ban Nong Bua",
				"Ban Nong Pru Pong" => "Ban Nong Pru Pong",
				"Ban Nong Sua" => "Ban Nong Sua",
				"Ban Mo" => "Ban Mo",
				"Ban Mi" => "Ban Mi",
				"Ban Huai Kwang" => "Ban Huai Kwang",
				"Ban Huai Tan" => "Ban Huai Tan",
				"Ban Huai Yoong" => "Ban Huai Yoong",
				"Ban Han" => "Ban Han",
				"Ban Hin Khon" => "Ban Hin Khon",
				"Ban Luam" => "Ban Luam",
				"Ban Laem" => "Ban Laem",
				"Ban Mai" => "Ban Mai",
				"Ban Mai Samrong" => "Ban Mai Samrong",
				"Ban Haet" => "Ban Haet",
				"Balo" => "Balo",
				"Bamnet Narong" => "Bamnet Narong",
				"Bung Borapret" => "Bung Borapret",
				"Bung Phra" => "Bung Phra",
				"Bung Wai" => "Bung Wai",
				"Buri Ram" => "Buri Ram",
				"Bu Rusi" => "Bu Rusi",
				"Bu Yai" => "Bu Yai",
				"Bukit" => "Bukit",
				"Prachuap Khiri Khan" => "Prachuap Khiri Khan",
				"Prachantakham" => "Prachantakham",
				"Pra Dipat" => "Pra Dipat",
				"Prachin Buri" => "Prachin Buri",
				"Pran Buri" => "Pran Buri",
				"Pathiu" => "Pathiu",
				"Pattani" => "Pattani",
				"Pak Khlong" => "Pak Khlong",
				"Pak Chong" => "Pak Chong",
				"Pak Tako" => "Pak Tako",
				"Pak Tho" => "Pak Tho",
				"Pak Nam Pho" => "Pak Nam Pho",
				"Pak Pan" => "Pak Pan",
				"Pak Phraek" => "Pak Phraek",
				"Pang Ton Phung" => "Pang Ton Phung",
				"Pang Puai" => "Pang Puai",
				"Pang Muang" => "Pang Muang",
				"Pang Asok" => "Pang Asok",
				"Padang Besar" => "Padang Besar",
				"Pa Phai" => "Pa Phai",
				"Pa Rai" => "Pa Rai",
				"Pa Sao" => "Pa Sao",
				"Preng" => "Preng",
				"Paet Riu" => "Paet Riu",
				"Pha Kho" => "Pha Kho",
				"Pha Khan" => "Pha Khan",
				"Pha Sadet" => "Pha Sadet",
				"Phaendin Thong" => "Phaendin Thong",
				"Phai Yai" => "Phai Yai",
				"Phayathai" => "Phayathai",
				"Phrom Daen" => "Phrom Daen",
				"Phrom Phiram" => "Phrom Phiram",
				"Phra Kaeo" => "Phra Kaeo",
				"Pra Chom Klao" => "Pra Chom Klao",
				"Phra Prong" => "Phra Prong",
				"Sanam Chandra Palace" => "Sanam Chandra Palace",
				"Phruphi" => "Phruphi",
				"Phru Yai" => "Phru Yai",
				"Phon Songkhram" => "Phon Songkhram",
				"Phahonyothin" => "Phahonyothin",
				"Pattaya" => "Pattaya",
				"Pattaya Tai" => "Pattaya Tai",
				"Phatthalung" => "Phatthalung",
				"Phan Thong" => "Phan Thong",
				"Phichit" => "Phichit",
				"Phichai" => "Phichai",
				"Phitsanulok" => "Phitsanulok",
				"Phuttamonthon Sai 2" => "Phuttamonthon Sai 2",
				"Phetchaburi" => "Phetchaburi",
				"Photharam" => "Photharam",
				"Phon Thong" => "Phon Thong",
				"Phrong Madua" => "Phrong Madua",
				"Phrong Akat" => "Phrong Akat",
				"Phu Khao Lat" => "Phu Khao Lat",
				"Thammasat University" => "Thammasat University",
				"Muak Lek" => "Muak Lek",
				"Maha Chai" => "Maha Chai",
				"Mamuang Song Ton" => "Mamuang Song Ton",
				"Marubo" => "Marubo",
				"Maluan" => "Maluan",
				"Makkasan" => "Makkasan",
				"Map Kabao" => "Map Kabao",
				"Map Ta Put" => "Map Ta Put",
				"Map Phra Chan" => "Map Phra Chan",
				"Map Ammarit" => "Map Ammarit",
				"Muang Khong" => "Muang Khong",
				"Muang Thi" => "Muang Thi",
				"Muang Phon" => "Muang Phon",
				"Mae Klong" => "Mae Klong",
				"Mae Chang" => "Mae Chang",
				"Mae Tan Noi" => "Mae Tan Noi",
				"Mae Tha" => "Mae Tha",
				"Mae Thiap" => "Mae Thiap",
				"Mae Nam" => "Mae Nam",
				"Mae Nam" => "Mae Nam",
				"Mae Phuak" => "Mae Phuak",
				"Mae Mo" => "Mae Mo",
				"Mai Kaen" => "Mai Kaen",
				"Yommaraj" => "Yommaraj",
				"Yala" => "Yala",
				"Yang Prasat" => "Yang Prasat",
				"Yang Yuan" => "Yang Yuan",
				"Yothaka" => "Yothaka",
				"Ron Phibun" => "Ron Phibun",
				"Rangsit" => "Rangsit",
				"Rang Pho" => "Rang Pho",
				"Rang Sakae" => "Rang Sakae",
				"Rachaburi" => "Rachaburi",
				"Rachaprarop" => "Rachaprarop",
				"Raman" => "Raman",
				"Ruso" => "Ruso",
				"RAMATHIBODI HOSPTAL" => "RAMATHIBODI HOSPTAL",
				"Rong Rien Kanbin" => "Rong Rien Kanbin",
				"Rong Rien Chansen" => "Rong Rien Chansen",
				"Rai Kled Dao" => "Rai Kled Dao",
				"Rai Oi" => "Rai Oi",
				"Lop Buri" => "Lop Buri",
				"Lamae" => "Lamae",
				"Lat Krabang" => "Lat Krabang",
				"Lat Bua Khao" => "Lat Bua Khao",
				"Lad Yai" => "Lad Yai",
				"Lalo" => "Lalo",
				"Lam Chi" => "Lam Chi",
				"Lam Narai" => "Lam Narai",
				"Lam Plai Mat" => "Lam Plai Mat",
				"Lamphun" => "Lamphun",
				"Lam Phura" => "Lam Phura",
				"Lumsum" => "Lumsum",
				"Luk Kae" => "Luk Kae",
				"Wongwian Yai" => "Wongwian Yai",
				"Wang Phong" => "Wang Phong",
				"Wang Krot" => "Wang Krot",
				"Wang Krang" => "Wang Krang",
				"Wang Kaphi" => "Wang Kaphi",
				"Wang Ka-am" => "Wang Ka-am",
				"Wang Duan" => "Wang Duan",
				"Wang Takhian" => "Wang Takhian",
				"Wang Pho" => "Wang Pho",
				"Wang Yen" => "Wang Yen",
				"Wang Lan" => "Wang Lan",
				"Wang Wua" => "Wang Wua",
				"Wang Sing" => "Wang Sing",
				"Wang Yai" => "Wang Yai",
				"Watthana Nakhon" => "Watthana Nakhon",
				"Wat Khlong Pu" => "Wat Khlong Pu",
				"Wat Khuan Phayer" => "Wat Khuan Phayer",
				"Wat Khuan Mit" => "Wat Khuan Mit",
				"Wat Ngiu Rai" => "Wat Ngiu Rai",
				"Wat Chang Hai" => "Wat Chang Hai",
				"Wat Sai" => "Wat Sai",
				"Wat Sing" => "Wat Sing",
				"Wat Suwan" => "Wat Suwan",
				"Wisai" => "Wisai",
				"Wihan Daeng" => "Wihan Daeng",
				"Si Sa Ket" => "Si Sa Ket",
				"Sri Samran" => "Sri Samran",
				"Sala Din" => "Sala Din",
				"Sala Thammasop" => "Sala Thammasop",
				"Sala Pha Lat" => "Sala Pha Lat",
				"Sala Mae Tha" => "Sala Mae Tha",
				"Sala Ya" => "Sala Ya",
				"Sala Lamduan" => "Sala Lamduan",
				"Sila At " => "Sila At ",
				"Sikhoraphum" => "Sikhoraphum",
				"10+375" => "10+375",
				"Sa Kaeo" => "Sa Kaeo",
				"Sa Kosi Narai" => "Sa Kosi Narai",
				"Saraburi" => "Saraburi",
				"Suan Nong Nuch" => "Suan Nong Nuch",
				"Suan Soan Pradipat" => "Suan Soan Pradipat",
				"Sawankhalok" => "Sawankhalok",
				"Sawi" => "Sawi",
				"Sakae Yang Mu" => "Sakae Yang Mu",
				"Saphli" => "Saphli",
				"Saphan Kwae Yai" => "Saphan Kwae Yai",
				"Chulalongkorn Bridge" => "Chulalongkorn Bridge",
				"Saphan Tam Krasae" => "Saphan Tam Krasae",
				"Sang Krathai" => "Sang Krathai",
				"Sam Yaek" => "Sam Yaek",
				"Sam Roi Yot" => "Sam Roi Yot",
				"Sam Sen" => "Sam Sen",
				"Saraphi" => "Saraphi",
				"Samran" => "Samran",
				"Samrong Thap" => "Samrong Thap",
				"Sikhiu" => "Sikhiu",
				"Sukhumvit 71" => "Sukhumvit 71",
				"Suphan Buri" => "Suphan Buri",
				"Suranarai" => "Suranarai",
				"Surat Thani" => "Surat Thani",
				"Surin" => "Surin",
				"Sungai Kolok" => "Sungai Kolok",
				"Sungai Padi" => "Sungai Padi",
				"Sung Noen" => "Sung Noen",
				"Saeng Daet" => "Saeng Daet",
				"Saen Sook" => "Saen Sook",
				"Sai Yai" => "Sai Yai",
				"Nong Krachap" => "Nong Krachap",
				"Nong Kuai" => "Nong Kuai",
				"Nong Kathing" => "Nong Kathing",
				"Nong Kae" => "Nong Kae",
				"Nong Khon Kwang" => "Nong Khon Kwang",
				"Nong Khang" => "Nong Khang",
				"Nong Khai " => "Nong Khai ",
				"Nong Khaen" => "Nong Khaen",
				"Nong Chok" => "Nong Chok",
				"Nong Jik" => "Nong Jik",
				"Nong Chim" => "Nong Chim",
				"Nong Saeng" => "Nong Saeng",
				"Nong Don" => "Nong Don",
				"Nong Tom" => "Nong Tom",
				"Nong Takai" => "Nong Takai",
				"Nong Tum" => "Nong Tum",
				"Nong Teng" => "Nong Teng",
				"Nong Tao" => "Nong Tao",
				"Nong Sai Khao" => "Nong Sai Khao",
				"Nong Nam Khao" => "Nong Nam Khao",
				"Nong Nam Khun" => "Nong Nam Khun",
				"Nong Nian" => "Nong Nian",
				"Nong Bua" => "Nong Bua",
				"Nong Bua Ngoen" => "Nong Bua Ngoen",
				"Nong Bua Lai" => "Nong Bua Lai",
				"Nong Pla Lai" => "Nong Pla Lai",
				"Nong Phakchi" => "Nong Phakchi",
				"Nong Phluang" => "Nong Phluang",
				"Nong Pho" => "Nong Pho",
				"Nong Fak" => "Nong Fak",
				"Nong Mongkhon" => "Nong Mongkhon",
				"Nong Manorom" => "Nong Manorom",
				"Nong Makhua" => "Nong Makhua",
				"Nong Mek" => "Nong Mek",
				"Nong Maeo" => "Nong Maeo",
				"Nong Mai Luang" => "Nong Mai Luang",
				"Nong Riang" => "Nong Riang",
				"Nong Wan Priang" => "Nong Wan Priang",
				"Nong Wua Thao" => "Nong Wua Thao",
				"Nong Wiwat" => "Nong Wiwat",
				"Nong Waeng" => "Nong Waeng",
				"Nong Sri Vichai" => "Nong Sri Vichai",
				"Nong Sala" => "Nong Sala",
				"Nong Sang" => "Nong Sang",
				"Nong Sida" => "Nong Sida",
				"Nong Saeng" => "Nong Saeng",
				"Nong Lom" => "Nong Lom",
				"Nong Hin" => "Nong Hin",
				"Lak Chang" => "Lak Chang",
				"Lak Si" => "Lak Si",
				"Lak Hok" => "Lak Hok",
				"Lang Suan" => "Lang Suan",
				"Huai Ket" => "Huai Ket",
				"Huai Koeng" => "Huai Koeng",
				"Huai Kaeo" => "Huai Kaeo",
				"Huai Khayung" => "Huai Khayung",
				"Huai Khwang" => "Huai Khwang",
				"Huai Chot" => "Huai Chot",
				"Huai Dua" => "Huai Dua",
				"Huai Thalaeng" => "Huai Thalaeng",
				"Huai Sai Tai" => "Huai Sai Tai",
				"Huai Sai Nua" => "Huai Sai Nua",
				"Huai Thap Than" => "Huai Thap Than",
				"Huai Prik" => "Huai Prik",
				"Huai Mut" => "Huai Mut",
				"Huai Mae Ta" => "Huai Mae Ta",
				"Huai Yot" => "Huai Yot",
				"Huai Yang" => "Huai Yang",
				"Huai Yai Chiu" => "Huai Yai Chiu",
				"Huai Rahat" => "Huai Rahat",
				"Huai Rak Mai" => "Huai Rak Mai",
				"Huai Rat" => "Huai Rat",
				"Huai Rian" => "Huai Rian",
				"Huai Rong" => "Huai Rong",
				"Huai Rai" => "Huai Rai",
				"Huai Sak" => "Huai Sak",
				"Huai Sam Phat" => "Huai Sam Phat",
				"Huai Sieo" => "Huai Sieo",
				"Whagor" => "Whagor",
				"Ho Krai" => "Ho Krai",
				"Hua Ngiu" => "Hua Ngiu",
				"Hua Dong" => "Hua Dong",
				"Hua Takhe" => "Hua Takhe",
				"Hua Mat" => "Hua Mat",
				"Hua Mak" => "Hua Mak",
				"Hua Wai" => "Hua Wai",
				"Hua Hin" => "Hua Hin",
				"Hang Chat" => "Hang Chat",
				"Han Kong" => "Han Kong",
				"Hanthao" => "Hanthao",
				"Hin Gong" => "Hin Gong",
				"Hin Son" => "Hin Son",
				"Hin Dat" => "Hin Dat",
				"Hin Lap" => "Hin Lap",
				"Laem Chabang" => "Laem Chabang",
				"Laem Tanot" => "Laem Tanot",
				"Ongkharak" => "Ongkharak",
				"Ayutthaya" => "Ayutthaya",
				"Aranyaprathet" => "Aranyaprathet",
				"Asoke" => "Asoke",
				"Udon Thani" => "Udon Thani",
				"Uttaradit" => "Uttaradit",
				"Uthumphon Phisai" => "Uthumphon Phisai",
				"Ubon Ratchathani" => "Ubon Ratchathani",
				"Urupong" => "Urupong",
				"Ai Satia" => "Ai Satia");

	$pattern = "~\b^(.+)?(" . $str . ")(.+)?\b~si";
	$matched_station = preg_grep($pattern, $arr);

	$words = explode(' ', $str);
	
	if(empty($matched_station) && count($words) > 1) {
		$str = $words[0];
		
		$pattern = "~\b^(.+)?(" . $str . ")(.+)?\b~si";
		$matched_station = preg_grep($pattern, $arr);
	}
	
	if(empty($matched_station)) {
		$str = implode("|", $words);
		
		$pattern = "~\b^(.+)?(" . $str . ")(.+)?\b~si";
		$matched_station = preg_grep($pattern, $arr);
	}
	
	var_dump($matched_station);		
	
	if(!empty($matched_station))
		return reset($matched_station);
	else
		return "";
}

?>
